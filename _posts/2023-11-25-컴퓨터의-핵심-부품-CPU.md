---
title: CPU
tags: [컴퓨터 구조]
categories: [컴퓨터 구조, 컴퓨터의 핵심 부품, CPU]
image:
  path: /assets/img/post/computer_architecture/computer_architecture.png
  alt: computer_architecture
date: 2023-11-25 01:52 +0900
---

## 중앙처리장치(CPU)

![cpu](/assets/img/post/computer_architecture/cpu.jpg){: width="500" height="300 .normal }

CPU는 컴퓨터의 핵심적인 부품으로, 컴퓨터의 '두뇌'라고 할 수 있다.
컴퓨터의 실행에 워낙 `많은 부분을 차지`하고 있어 CPU는 크게 아래 `5가지의 구성요소`로 다시 나뉘게 된다.

### 1. 산술 논리 장치(ALU: Arithmetic and Logical Unit)

- ALU는 **모든 산술(덧셈, 뺄셈)과 논리(AND, OR, NOT 등)연산을 수행**

### 2. 제어 장치(Control Unit)

- 제어 장치는 **CPU 내에서 명령어를 해석하고, ALU나 다른 구성 요소들에게 명령어 실행을 지시**
- 명령어들의 순서를 조정하고, 시스템의 다른 부분들과 작업 흐름을 제어

### 3. 레지스터(Register)

- 레지스터는 CPU 내의 매우 빠른 기억 장치로, **현재 수행 중인 작업과 관련된 데이터나 명령어를 임시로 저장**

### 4. 캐시 메모리(Cache Memory)

- 캐시 메모리는 **빈번하게 사용되거나 최근에 사용된 데이터와 명령어를 임시 저장**하는 고속 메모리
- 캐시 메모리는 일반적으로 여러 레벨(L1, L2, L3 등)로 구성되며, 각 레벨은 속도와 크기에서 차이가 있으며, CPU와의 거리에 따라 분류
- L1 캐시는 가장 빠르지만 용량이 작고, L2와 L3는 상대적으로 느리지만 더 많은 데이터를 저장할 수 있음

### 5. 클럭(Clock)

- 클럭은 **CPU의 작동 속도를 조절하는 타이밍 장치**로, CPU 내의 모든 활동은 클럭 사이클에 맞춰 이뤄짐
- 클럭 속도는 CPU가 초당 몇 번의 연산을 수행할 수 있는지를 나타냄

<br>
> 그럼 클럭 속도를 무조건 최고속도로 설정하면 좋은거 아니야? <br>
- **클럭 속도를 조절하는 이유**
  - **열 발생**: 클럭 속도가 높아질수록 CPU에서 발생하는 열이 증가하며, 과도한 열은 CPU에 손상을 줄 수 있음
  - **전력 소비** : 클럭 속도가 증가하면 전력 소비도 증가하며, 이는 특히 배터리로 작동하는 모바일 장치에서 중요한 문제가 될 수 있음
  높은 전력 소비는 배터리 수명을 단축시키고, 전력 관리에 대한 요구가 증가

<br>
> 제어 장치랑 클럭 둘다 적업흐름을 관리하는데 차이점이 대체 뭘까? <br>
- **제어 장치와 클럭의 차이점**
  - **기능적 차이**: 제어 장치는 명령어 해석과 데이터 흐름의 지휘를 담당하는 반면, 클럭은 작업의 타이밍과 동기화를 관리
  - **동작 방식** : 제어 장치는 CPU의 '두뇌'로서 **명령어를 어떻게 처리할지** 결정하는 반면, 클럭은 '시계'로서 모든 **작업이 언제 일어날지**를 정함

<br>

> 위에 우리는 CPU내의 주요 구성 요소에 대해 간략히 살펴보았다. <br>
> 그렇다면 실제 5 + 3에 결과가 무엇인지 CPU에게 연산을 시키면 어떻게 동작하는걸까? 🧐

### CPU 동작 방식 (5 + 3) ❗️

1. **명령어의 해석(제어 장치)**
   - 사용자 또는 프로그램으로부터 `5 + 3`이라는 연산 명령이 CPU에 전달된다.
   - 제어 장치(Control Unit)는 이 명령어를 해석하여, 필요한 연산이 덧셈임을 파악하고, 이에 필요한 데이터와 연산을 식별한다.
2. **데이터 로딩(레지스터)**
   - 제어 장치는 `5`와 `3`이라는 데이터를 레지스터(Register)로 이동시킨다.
3. **산술 연산 수행(산술 논리 장치)**
   - 제어 장치는 산술 논리 장치(ALU)에 레지스터에 저장된 `5`와 `3`을 더하라는 명령을 내린다.
   - ALU는 덧셈 연산을 수행하고, 결과값인 `8`을 다시 레지스터에 저장한다.
4. **캐시 메모리 활용**
   - 이 과정에서 캐시 메모리(Cache Memory)는 최근에 사용된 데이터나 연산 결과를 저장한다.
   - CPU가 동일한 데이터('5'와 '3')를 사용하여 또 다시 덧셈 연산을 수행해야 할 경우, 캐시 메모리는 이 데이터를 빠르게 제공한다. 이는 메모리로 부터 데이터를 다시 로딩하는 과정을 간소화하고, 전반적인 연산 속도를 향상시킨다.
5. **클럭의 역할**
   - 이 모든 과정은 CPU의 클럭(Clock) 사이클에 따라 진행된다. 클럭은 CPU내의 모든 활동의 타이밍을 조정하며, 클럭 속도는 이러한 연산이 수행되는 속도를 결정한다.

<br>
> 레지스터랑 캐시 메모리중 **더 빠른 것은 레지스터**이다. <br>
여기서 궁금증이 하나 생기는데, 그럼 캐시 메모리는 왜 필요한걸까? <br><br>
캐시메모리를 사용하지 않고 레지스터로 바로 이동시켜서 연산하면 되는데?? 🧐

#### CPU의 제어 장치가 데이터를 로드 하는 방식 4가지

1. **직접 할당**: 프로그램의 명령어 자체가 리터럴 값 `5`와 `3`을 포함할 수 있으며, 이 경우 CPU는 명령어를 디코딩하면서 직접 이 값을 레지스터에 로드시킨다.
2. **메모리 접근**: 데이터가 메모리(RAM)에 저장되어 있을 경우, 제어 장치는 메모리 주소를 통해 해당 데이터를 읽어 레지스터로 전송한다.
3. **캐시 메모리 활용**: `5`와 `3`이 최근에 사용되어 캐시 메모리에 있을 경우, 제어 장치는 캐시에서 이 값을 빠르게 가져와 레지스터로 로드한다.
4. **입출력 장치**: 특정한 경우에는 입력 장치(예: 키보드, 네트워크 등)로 부터 직접 데이터를 받아서 레지스터에 로드한다.

<br>
> 캐시 메모리를 사용하는 이유는 위에 설명해놓은 데이터를 로드 하는 방식 중 **2번쨰 메모리 접근을 해서 데이터를 가져오는 경우**에 사용된다.
제어 장치가 메모리까지 접근해 데이터를 받아오는 것이 아닌 물리적으로 더 가까운 위치에 존재하는 캐시 메모리에서 데이터를 가져옴으로써 연산할 내용을 더 빠르게 레지스터에 로드할 수 있다.

#### 레지스터만 사용하지않고 메모리(RAM)도 함께 사용되는 이유

**용량 제한**: 레지스터는 매우 빠른 접근 속도를 제공하지만, 그 용량이 매우 제한적이며, 일반적으로 소량의 데이터만 저장할 수 있다. 이는 현재 실행 중인 **몇몇 연산에 필요한 정보를 임시로 저장하는 데 적합**하다.

**멀티태스킹**: 현대 컴퓨터 시스템은 멀티태스킹을 지원하며, 이를 위해 여러 프로그램이 동시에 메모리에 적재되어야 하며, 레지스터만으로는 이를 지원하는 데 충분한 공간이 없다.

**데이터 공유 및 보호**: 프로그램 간에 데이터를 공유하거나, 운영 체제가 메모리에 저장된 데이터를 보호하기 위한 메커니즘이 필요하다. RAM은 메모리 관리 기법을 통해 이러한 기능을 수행할 수 있으며, 레지스터는 이러한 목적에 적합하지 않다.

<br>
> 내 머릿속에 있는 CPU구조

![cpu-structure](/assets/img/post/computer_architecture/cpu-structure.jpeg){: width="400" height="300 .normal }
