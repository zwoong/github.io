---
layout: post
title: 명령어 사이클과 인터럽트
tags: [컴퓨터 구조, 명령어 사이클과 인터럽트]
categories: [컴퓨터 구조, 명령어 사이클과 인터럽트]
date: 2023-12-11 22:50 +0900
---

## 명령어 사이클

컴퓨터 중앙 처리 장치(CPU)의 기본 작동 프로세스로서, 이 주기는 **컴퓨터가 프로그램의 단일 명령을 처리하는 방식**이다. <br>
컴퓨터가 다양한 작업을 수행하기 위해 일련의 명령을 실행하는 방법을 이해해 보자. 😉

### 명령어 사이클 단계

![instruction-cycles](/assets/img/post/computer-architecture/instruction-cycles.webp){: width="600" height="200 }

1. **Fetch**: CPU가 **메모리(RAM)에서 명령어를 가져온다**. 프로그램 카운터(PC)는 가져올 다음 명령어를 가리키며, 이 명령어는 메모리에서 명령어 레지스터(IR)로 로드된다. 가져온 후 PC는 순서대로 다음 명령어를 가리키도록 증가한다.
2. **Decode**: CPU는 **가져온 명령을 해석**한다. 이 단계에서는 명령이 수행해야 할 작업을 결정한다.
3. **Execute**: CPU가 **명령에 필요한 작업을 수행**한다. 여기에는 산술 계산(덧셈, 뺄셈, 곱셈, 나눗셈), 논리 연산(AND, OR, NOT), 데이터 이동(한 레지스터에서 다른 레지스터로 또는 메모리 간 데이터 전송) 및 제어와 같은 다양한 연산이 포함될 수 있다.
4. **Memory Access (if required)**: 일부 명령에서는 **CPU가 주 메모리에서 읽거나, 쓰도록 요구**한다. 모든 명령어에 메모리 액세스가 필요한 것은 아니라는 점에 유의하는 것이 중요하다.
5. **Writeback (if required)**: **실행 단계의 결과가 레지스터나 메모리 위치에 다시 기록**된다. 예를 들어, 명령어가 산술 연산인 경우 결과는 지정된 레지스터에 저장된다.

## 인터럽트

컴퓨팅에서 중요한 기능으로, 프로세서가 **긴급 작업을 수행하기 위해 현재 활동을 일시적으로 중단한 다음 원래 작업을 재개**할 수 있게 해준다.

### 인터럽트 유형

- **하드웨어 인터럽트**: 하드웨어 장치(예: 키보드, 마우스 또는 네트워크 어댑터)에 의해 생성되어 CPU의 주의가 필요하다는 신호를 보낸다.
- **소프트웨어 인터럽트**: 이는 종종 시스템 호출을 통해 프로그램이나 운영 체제에 의해 생성된다. 파일 액세스 또는 메모리 할당과 같은 운영 체제의 서비스를 요청하는 데 사용된다.

### 인터럽트 작동 방식

![interrupt-handler](/assets/img/post/computer-architecture/interrupt-handler.webp){: width="600" height="200 }

1. **Interrupt Signal**: **인터럽트 신호가 CPU로 전송**된다.
2. **Interrupt Handler**: CPU가 인터럽트를 수신하면 **현재 명령어 시퀀스 실행을 일시적으로 중지**한다. 현재 프로세스의 컨텍스트(예: 레지스터 값)를 저장한 다음 인터럽트 핸들러 또는 [인터럽트 서비스 루틴(ISR)](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8_%ED%95%B8%EB%93%A4%EB%9F%AC)이라는 특수 함수의 컨텍스트를 로드한다.
3. **Service Routine**: ISR은 인터럽트를 처리하도록 설계된 운영 체제 또는 장치 드라이버이다. **인터럽트를 처리하고 필요한 작업을 수행한 다음 중단된 프로세스를 재개할 준비**를 한다.
4. **Resume Execution**: ISR이 완료된 후 CPU는 중단된 프로세스의 이전에 저장된 컨텍스트를 복원하고 실행을 재개한다.

### 인터럽트 특성

- **선점형 멀티태스킹**: 인터럽트를 사용하면 운영 체제가 실행 중인 프로세스를 중단하고, 다른 프로세스의 시간을 제공해 시스템의 전반적인 효율성과 응답성을 향상할 수 있는 [선점형 멀티태스킹](https://namu.wiki/w/%EB%A9%80%ED%8B%B0%ED%83%9C%EC%8A%A4%ED%82%B9)이 가능하다.
- **비동기 이벤트**: 인터럽트를 사용하면 CPU가 비동기 이벤트에 응답할 수 있다. 즉, CPU의 주요 활동과 관계없이 언제든지 발생할 수 있는 이벤트를 의미한다.
- **우선순위 처리**: 일부 시스템에는 인터럽트에 대한 우선순위 수준이 있어 더 중요한 인터럽트를 덜 중요한 인터럽트보다 먼저 처리할 수 있다.
- **효율성**: 인터럽트가 없으면 CPU는 주의가 필요한지 확인하기 위해 모든 장치를 지속해서 확인(폴링)해야 하는데 이는 매우 비효율적이다. 인터럽트를 사용하면 필요할 때만 CPU에 주위를 줄 수 있다.
